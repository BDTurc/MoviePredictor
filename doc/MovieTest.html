<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class MovieTest - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script src="./js/jquery.js"></script>
<script src="./js/darkfish.js"></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Object
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-get_differences">#get_differences</a>
    
    <li ><a href="#method-i-mean_error">#mean_error</a>
    
    <li ><a href="#method-i-rms_error">#rms_error</a>
    
    <li ><a href="#method-i-stddev">#stddev</a>
    
    <li ><a href="#method-i-to_array">#to_array</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-MovieTest">
  <h1 id="class-MovieTest" class="class">
    class MovieTest
  </h1>

  <section class="description">
    
<p>Author:  Bryan Turcotte</p>

<p>Author:  Bryan Turcotte</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(results)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File ml-100k/movies2_test.rb, line 7</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">results</span>)
  <span class="ruby-ivar">@results</span> = <span class="ruby-identifier">results</span>
  <span class="ruby-ivar">@differences_array</span> = <span class="ruby-identifier">get_differences</span> <span class="ruby-comment">#Used in all error calculations</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-get_differences" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_differences</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>All the error calculations rely on the difference between predicted and
true values, so this calculates that once and stores the differences in an
array.</p>
          
          

          
          <div class="method-source-code" id="get_differences-source">
            <pre><span class="ruby-comment"># File ml-100k/movies2_test.rb, line 49</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_differences</span>()
  <span class="ruby-identifier">differences_array</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@results</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">tuple</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">actual_rating</span> = <span class="ruby-identifier">tuple</span>[<span class="ruby-value">2</span>].<span class="ruby-identifier">to_f</span>
    <span class="ruby-identifier">predicted_rating</span> = <span class="ruby-identifier">tuple</span>[<span class="ruby-value">3</span>].<span class="ruby-identifier">to_f</span>
    <span class="ruby-identifier">differences_array</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">actual_rating</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">predicted_rating</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">differences_array</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-mean_error" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">mean_error</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Takes all prediction values from <a
href="MovieData.html#method-i-run_test">MovieData#run_test</a>, as well as
all the rating values for each of those movies.  Determines the mean of the
difference.</p>
          
          

          
          <div class="method-source-code" id="mean_error-source">
            <pre><span class="ruby-comment"># File ml-100k/movies2_test.rb, line 13</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">mean_error</span>() 
    
  <span class="ruby-identifier">difference</span> = <span class="ruby-value">0.0</span>
  <span class="ruby-ivar">@differences_array</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">difference_value</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">difference</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">difference_value</span>.<span class="ruby-identifier">abs</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">error_val</span> = <span class="ruby-identifier">difference</span> <span class="ruby-operator">/</span> <span class="ruby-ivar">@differences_array</span>.<span class="ruby-identifier">length</span> <span class="ruby-comment">#@differences_array.length is a substitute for our n-value</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">error_val</span>.<span class="ruby-identifier">round</span>(<span class="ruby-value">2</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-rms_error" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rms_error</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Calculates Root Mean Square error by taking the sum of the squared
differene between each prediction and the actual rating, and dividing by
the number of tests</p>
          
          

          
          <div class="method-source-code" id="rms_error-source">
            <pre><span class="ruby-comment"># File ml-100k/movies2_test.rb, line 24</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">rms_error</span>() 
  <span class="ruby-identifier">difference_squared</span> = <span class="ruby-value">0.0</span>
  <span class="ruby-ivar">@differences_array</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">difference_value</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">difference_squared</span> <span class="ruby-operator">+=</span>  <span class="ruby-identifier">difference_value</span> <span class="ruby-operator">**</span> <span class="ruby-value">2</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">value</span> = <span class="ruby-identifier">difference_squared</span> <span class="ruby-operator">/</span> <span class="ruby-ivar">@differences_array</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">error_val</span> = <span class="ruby-constant">Math</span>.<span class="ruby-identifier">sqrt</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">error_val</span>.<span class="ruby-identifier">round</span>(<span class="ruby-value">2</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-stddev" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">stddev</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Calculates the standard deviation of the error value (the square-root of
the sum of values that are given when predicted value is subtracted from
actual value, then the mean error is subtracted from that value and  this
result is squared.</p>
          
          

          
          <div class="method-source-code" id="stddev-source">
            <pre><span class="ruby-comment"># File ml-100k/movies2_test.rb, line 35</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">stddev</span>() 
  <span class="ruby-identifier">mean_val</span> = <span class="ruby-identifier">mean_error</span>
  <span class="ruby-identifier">difference_mean</span> = <span class="ruby-value">0.0</span>
  <span class="ruby-identifier">std_dev</span> = <span class="ruby-value">0.0</span>
  <span class="ruby-ivar">@differences_array</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">difference_value</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">difference_mean</span> <span class="ruby-operator">+=</span> (<span class="ruby-identifier">difference_value</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">mean_val</span>) <span class="ruby-operator">**</span> <span class="ruby-value">2</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">difference_mean</span> = <span class="ruby-identifier">difference_mean</span> <span class="ruby-operator">/</span> <span class="ruby-ivar">@differences_array</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">std_dev</span> = <span class="ruby-constant">Math</span>.<span class="ruby-identifier">sqrt</span>(<span class="ruby-identifier">difference_mean</span>) 
    
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">std_dev</span>.<span class="ruby-identifier">round</span>(<span class="ruby-value">2</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_array" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_array</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Turns the results table (an array of arrays) into a 1-D array, where each
line is in the format [user_id, movie_id, true rating, prediction]</p>
          
          

          
          <div class="method-source-code" id="to_array-source">
            <pre><span class="ruby-comment"># File ml-100k/movies2_test.rb, line 60</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_array</span>() 
  <span class="ruby-identifier">viewable_array</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@results</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">tuple</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">results</span> = <span class="ruby-identifier">tuple</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;, &quot;</span>)
    <span class="ruby-identifier">viewable_array</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">results</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">viewable_array</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

